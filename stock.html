<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SoleZone | Stock</title>
  <style>
    /* (Include all your styles from the snippet above) */
  </style>
</head>
<body>

<header>…</header>

<section class="hero">
  <div class="hero-content">
    <h1>Our Current Stock</h1>
    <p>Premium Trainers from leading brands</p>
  </div>
</section>

<div class="container">
  <section>
    <div class="stock-grid" id="stockGrid"></div>
  </section>
</div>

<footer>…</footer>

<script>
  const shoes = [
    { title:"Air Max 90", price:"£85", images:["images/IMG-20250620-WA0001.jpg","images/IMG-20250620-WA0002.jpg","images/IMG-20250620-WA0003.jpg","images/IMG-20250620-WA0006.jpg","images/IMG-20250620-WA0007.jpg"], info:{size:"UK 9",condition:"New",color:"White/Black",material:"Leather + mesh",shipping:"Ships in 1‑2 days",box:"Original box + tags",authenticity:"Guaranteed"}, buyLink:"https://www.vinted.co.uk/member/233654539" },
    { title:"Yeezy Boost 350", price:"£150", images:[], info:{}, buyLink:"#"},
    { title:"Dunk Low Panda", price:"£110", images:[], info:{}, buyLink:"#"},
    { title:"Jordan 1 Retro", price:"£125", images:[], info:{}, buyLink:"#"},
    { title:"New Balance 550", price:"£95", images:[], info:{}, buyLink:"#"}
  ];

  const grid = document.getElementById('stockGrid');
  let currentIdx = null;
  let cardElems = [];

  function buildCard(shoe, idx) {
    const card = document.createElement('div');
    card.className = 'item-card';
    card.tabIndex = 0;
    card.innerHTML = `
      <img src="${shoe.images[0] || 'https://via.placeholder.com/300x160?text=No+Image'}" alt="${shoe.title}">
      <h3>${shoe.title}</h3><p>${shoe.price}</p>`;
    card.addEventListener('click', () => toggleExpand(idx));
    card.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        toggleExpand(idx);
      }
    });
    return card;
  }

  function toggleExpand(idx) {
    if (currentIdx === idx) { collapse(); return; }
    if (currentIdx !== null) collapse();
    currentIdx = idx;

    const shoe = shoes[idx];
    const card = cardElems[idx];
    card.style.display = 'none';

    const panel = document.createElement('div');
    panel.className = 'expanded-panel';
    panel.tabIndex = 0;

    panel.innerHTML = `
      <div class="image-viewer">
        <div class="arrow arrow-left">&#10094;</div>
        <img src="${shoe.images[0] || 'https://via.placeholder.com/600x400?text=No+Image'}" alt="">
        <div class="arrow arrow-right">&#10095;</div>
      </div>
      <div class="details">
        <h2>${shoe.title}</h2><p><strong>Price:</strong> ${shoe.price}</p>
        ${Object.entries(shoe.info).map(([k,v]) => v?`<p><strong>${k.charAt(0).toUpperCase()+k.slice(1)}:</strong> ${v}</p>`:'').join('')}
        <a class="buy-link" href="${shoe.buyLink}" target="_blank">Buy now on Vinted</a>
      </div>`;

    const left = panel.querySelector('.arrow-left');
    const right = panel.querySelector('.arrow-right');
    const img = panel.querySelector('.image-viewer img');
    let imgIdx = 0;

    left.addEventListener('click', e => {
      e.stopPropagation();
      if (!shoe.images.length) return;
      imgIdx = (imgIdx -1 + shoe.images.length)%shoe.images.length;
      img.src = shoe.images[imgIdx];
    });
    right.addEventListener('click', e => {
      e.stopPropagation();
      if (!shoe.images.length) return;
      imgIdx = (imgIdx +1)%shoe.images.length;
      img.src = shoe.images[imgIdx];
    });
    panel.addEventListener('click', collapse);

    card.insertAdjacentElement('afterend', panel);
    panel.focus({preventScroll:true});
  }

  function collapse() {
    if (currentIdx === null) return;
    const panel = document.querySelector('.expanded-panel');
    if (panel) panel.remove();
    cardElems[currentIdx].style.display = '';
    currentIdx = null;
  }

  document.addEventListener('click', e => {
    if (currentIdx !== null && !e.target.closest('.item-card') && !e.target.closest('.expanded-panel')) collapse();
  });
  document.addEventListener('keydown', e => {
    if (e.key==='Escape') collapse();
  });

  shoes.forEach((shoe,i) => {
    const c = buildCard(shoe,i);
    cardElems.push(c);
    grid.appendChild(c);
  });
</script>

</body>
</html>
