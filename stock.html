<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SoleZone | Stock</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap');
    * { box-sizing: border-box; margin:0; padding:0; }
    body { font-family:'Poppins', sans-serif; background:#111; color:#eee; min-height:100vh; }
    header { position:fixed; top:0; width:100%; background:rgba(0,0,0,0.85); display:flex; justify-content:space-between; align-items:center; padding:12px 20px; z-index:1000; box-shadow:0 2px 8px rgba(0,0,0,0.7); }
    header h1 { font-size:1.4rem; }
    header h1 span { display:block; font-size:0.75rem; color:#4caf50; font-weight:300; }
    nav { display:flex; gap:18px; }
    nav a { color:#ccc; text-decoration:none; position:relative; padding-bottom:2px; }
    nav a::after { content:''; position:absolute; bottom:-2px; left:0; width:0; height:2px; background:#4caf50; transition:width .3s ease; }
    nav a:hover, nav a.active { color:#fff; }
    nav a:hover::after, nav a.active::after { width:100%; }
    .menu-toggle { display:none; font-size:1.5rem; color:#ccc; background:none; border:none; cursor:pointer; }
    .dropdown { display:none; position:absolute; top:100%; left:0; right:0; background:rgba(0,0,0,0.9); flex-direction:column; padding:10px 20px; box-shadow:0 4px 10px rgba(0,0,0,0.7); z-index:1100; }
    .dropdown a { padding:10px 0; border-bottom:1px solid #333; color:#eee; font-size:1rem; text-decoration:none; }
    .dropdown a:last-child { border-bottom:none; }
    .dropdown a:hover, .dropdown a.active { color:#4caf50; }
    .hero { margin-top:56px; height:40vh; background:linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.6)), url('https://via.placeholder.com/1200x600?text=SoleZone+Stock') center/cover no-repeat; display:flex; align-items:center; justify-content:center; text-align:center; }
    .hero h1 { font-size:2.2rem; }
    .hero p { font-size:1.1rem; }
    .container { max-width:1200px; margin:40px auto 60px; padding:0 20px; }

    /* Search & custom filter */
    .search-bar { display:flex; gap:12px; flex-wrap:wrap; margin-bottom:25px; }
    .search-bar input { flex:1 1 250px; padding:12px 18px; font-size:1rem; border:none; background:rgba(255,255,255,0.08); color:#eee; border-radius:12px; backdrop-filter:blur(10px); transition:background .3s; }
    .search-bar input::placeholder { color:#bbb; }
    .search-bar input:focus { background:rgba(255,255,255,0.15); outline:none; }

    .filter-wrapper { position:relative; flex:1 1 200px; min-width:200px; }
    .filter-button { width:100%; padding:12px 18px; font-size:1rem; text-align:left; border:none; background:rgba(255,255,255,0.08); color:#eee; border-radius:12px; backdrop-filter:blur(10px); cursor:pointer; }
    .filter-button:after { content:'▼'; float:right; font-size:0.8rem; transform:rotate(0deg); transition:transform .2s; }
    .filter-wrapper.open .filter-button:after { transform:rotate(180deg); }
    .filter-options { display:none; position:absolute; top:100%; left:0; width:100%; background:rgba(30,30,30,0.95); border-radius:8px; margin-top:6px; box-shadow:0 4px 12px rgba(0,0,0,0.6); z-index:100; max-height:200px; overflow-y:auto; }
    .filter-wrapper.open .filter-options { display:block; }
    .filter-option { padding:10px 14px; font-size:1rem; color:#eee; cursor:pointer; }
    .filter-option:hover, .filter-option.selected { background:rgba(76,175,80,0.2); }

    .stock-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:24px; }
    .item-card { background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); padding:10px; border-radius:12px; text-align:center; cursor:pointer; transition:transform .3s; display:flex; flex-direction:column; }
    .item-card:hover { transform:translateY(-6px); }
    .item-card img { width:100%; height:160px; object-fit:cover; border-radius:10px; margin-bottom:10px; }
    .item-card h3 { font-size:1.1rem; color:#4caf50; margin-bottom:4px; }
    .item-card p { color:#ccc; font-size:0.95rem; margin-top:auto; }

    .no-results { text-align:center; color:#777; margin-top:40px; font-size:1.3rem; display:none; }

    /* Expanded modal */
    #expandedPanel { position:fixed; inset:0; background:rgba(0,0,0,0.85); display:none; justify-content:center; align-items:center; padding:20px; z-index:2000; }
    #expandedPanel.active { display:flex; }
    .expanded-content { background:rgba(30,30,30,0.95); border-radius:16px; width:90%; max-width:800px; max-height:85vh; display:flex; overflow:hidden; color:#ccc; }
    .image-viewer { flex:1; position:relative; background:#222; display:flex; align-items:center; justify-content:center; }
    .image-viewer img { max-width:100%; max-height:100%; object-fit:contain; }
    .arrow { position:absolute; top:50%; transform:translateY(-50%); width:36px; height:36px; background:rgba(0,0,0,0.55); color:#4caf50; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; }
    .arrow-left { left:12px; }
    .arrow-right { right:12px; }
    .details { flex:1; padding:20px; overflow-y:auto; }
    .details h2 { color:#4caf50; margin-bottom:12px; }
    .details p { margin-bottom:8px; line-height:1.5; }
    .buy-link { display:inline-block; margin-top:20px; background:#4caf50; padding:12px 20px; border-radius:10px; color:#111; font-weight:700; text-decoration:none; transition:background .3s; }
    .buy-link:hover { background:#388e3c; }

    footer { text-align:center; padding:20px 0; color:#aaa; font-size:0.9rem; border-top:1px solid #333; }

    @media(max-width:768px){
      .menu-toggle { display:block; }
      nav { display:none; }
      .dropdown { position:fixed; top:56px; }
      .search-bar { flex-direction:column; }
      .filter-wrapper, input { width:100%; }
      .expanded-content { flex-direction:column; max-height:80vh; width:95%; }
      .image-viewer, .details { padding:10px; }
    }
  </style>
</head>
<body>
<header>
  <h1>SoleZone <span>Premium Trainers from leading brands</span></h1>
  <button class="menu-toggle">☰</button>
  <nav>
    <a href="index.html">Home</a>
    <a href="stock.html" class="active">Stock</a>
    <a href="info.html">Info</a>
    <a href="contact.html">Contact</a>
  </nav>
  <div class="dropdown" id="dropdownMenu">
    <a href="index.html">Home</a>
    <a href="stock.html" class="active">Stock</a>
    <a href="info.html">Info</a>
    <a href="contact.html">Contact</a>
  </div>
</header>

<section class="hero">
  <div>
    <h1>Our Current Stock</h1>
    <p>Premium Trainers from leading brands</p>
  </div>
</section>

<div class="container">
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search shoes..." autocomplete="off" />
    <div class="filter-wrapper" id="filterWrapper">
      <button class="filter-button" id="filterButton">All Conditions</button>
      <div class="filter-options" id="filterOptions">
        <div class="filter-option selected" data-val="">All Conditions</div>
        <div class="filter-option" data-val="New">New</div>
        <div class="filter-option" data-val="Used">Used</div>
      </div>
    </div>
  </div>

  <div class="stock-grid" id="stockGrid" aria-live="polite"></div>
  <div class="no-results" id="noResults">No shoes found.</div>
</div>

<div id="expandedPanel">
  <div class="expanded-content">
    <div class="image-viewer">
      <div class="arrow arrow-left">&#10094;</div>
      <img src="" alt="" id="mainImage" />
      <div class="arrow arrow-right">&#10095;</div>
    </div>
    <div class="details" id="shoeDetails"></div>
  </div>
</div>

<footer>This site is for display only. All orders handled through Vinted or eBay.</footer>

<script>
  const menuToggle = document.querySelector('.menu-toggle');
  const dropdownMenu = document.getElementById('dropdownMenu');
  menuToggle.onclick = () => dropdownMenu.classList.toggle('show');

  const searchInput = document.getElementById('searchInput');
  const filterWrapper = document.getElementById('filterWrapper');
  const filterButton = document.getElementById('filterButton');
  const filterOptions = document.getElementById('filterOptions');
  const stockGrid = document.getElementById('stockGrid');
  const noResults = document.getElementById('noResults');
  const expandedPanel = document.getElementById('expandedPanel');
  const mainImage = document.getElementById('mainImage');
  const shoeDetails = document.getElementById('shoeDetails');
  const prevArrow = expandedPanel.querySelector('.arrow-left');
  const nextArrow = expandedPanel.querySelector('.arrow-right');

  let shoes = [], filtered = [], currentIndex = 0, currentImage = 0;
  let filterValue = '';

  fetch('folder/shoes.json?v=' + Date.now())
    .then(r => r.json())
    .then(data => { shoes = data; filtered = shoes; render(); })
    .catch(e => stockGrid.innerHTML = '<p style="color:#f44;">Failed to load data</p>');

  function render() {
    stockGrid.innerHTML = '';
    const list = shoes.filter(shoe => {
      const matchSearch = shoe.title.toLowerCase().includes(searchInput.value.trim().toLowerCase());
      const matchCond = !filterValue || shoe.info.condition === filterValue;
      return matchSearch && matchCond;
    });
    if (!list.length) return noResults.style.display='block';
    noResults.style.display='none';

    list.forEach((shoe,i) => {
      const card = document.createElement('div');
      card.className='item-card';
      card.tabIndex=0;
      card.innerHTML = `<img src="${shoe.images[0]||'https://via.placeholder.com/300x160?text=No+Image'}" alt="${shoe.title}">
        <h3>${shoe.title}</h3><p>${shoe.price}</p>`;
      card.onclick=()=>open(i,list);
      card.onkeydown=e=>{ if(e.key=='Enter'||e.key==' ') open(i,list) };
      stockGrid.appendChild(card);
    });
  }

  searchInput.oninput = render;

  filterButton.onclick = () => filterWrapper.classList.toggle('open');
  document.querySelectorAll('.filter-option').forEach(opt => {
    opt.onclick = () => {
      document.querySelectorAll('.filter-option').forEach(o => o.classList.remove('selected'));
      opt.classList.add('selected');
      filterValue = opt.dataset.val;
      filterButton.textContent = opt.textContent;
      filterWrapper.classList.remove('open');
      render();
    };
  });

  function open(idx,list) {
    currentIndex = idx; currentImage = 0;
    show(list);
  }

  function show(list) {
    const shoe = list[currentIndex];
    mainImage.src = shoe.images[currentImage] || 'https://via.placeholder.com/600x400?text=No+Image';
    shoeDetails.innerHTML = `
      <h2>${shoe.title}</h2>
      <p><strong>Price:</strong> ${shoe.price}</p>
      <p><strong>Condition:</strong> ${shoe.info.condition||'N/A'}</p>
      <p><strong>Size:</strong> ${shoe.info.size||'N/A'}</p>
      <p><strong>Color:</strong> ${shoe.info.color||'N/A'}</p>
      <p><strong>Material:</strong> ${shoe.info.material||'N/A'}</p>
      <p><strong>Shipping:</strong> ${shoe.info.shipping||'N/A'}</p>
      <p><strong>Box:</strong> ${shoe.info.box||'N/A'}</p>
      <p><strong>Authenticity:</strong> ${shoe.info.authenticity||'N/A'}</p>
      <a href="${shoe.buyLink||'#'}" class="buy-link" target="_blank">Buy now</a>
    `;
    expandedPanel.classList.add('active');
  }

  prevArrow.onclick = () => {
    const list = shoes.filter(shoe => shoe.title.toLowerCase().includes(searchInput.value.trim().toLowerCase()) && (!filterValue || shoe.info.condition === filterValue));
    currentImage = (currentImage-1 + list[currentIndex].images.length) % list[currentIndex].images.length;
    show(list);
  };
  nextArrow.onclick = () => {
    const list = shoes.filter(shoe => shoe.title.toLowerCase().includes(searchInput.value.trim().toLowerCase()) && (!filterValue || shoe.info.condition === filterValue));
    currentImage = (currentImage+1) % list[currentIndex].images.length;
    show(list);
  };

  expandedPanel.onclick = e => { if(e.target===expandedPanel) expandedPanel.classList.remove('active'); };
  document.onkeydown = e => { if(e.key=='Escape') expandedPanel.classList.remove('active'); };
</script>
</body>
</html>
